<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-09-23">

<title>Gov 50 (Fall 2022) - Final Project Information</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../files/img/gov50-icon-512.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Gov 50 (Fall 2022)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html" rel="" target="">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../schedule.html" rel="" target="">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../materials/index.html" rel="" target="">
 <span class="menu-text">Materials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../assignments/index.html" rel="" target="">
 <span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../resources/index.html" rel="" target="">
 <span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://edstem.org/us/courses/24957/discussion/" rel="" target="">
 <span class="menu-text">Ed</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.gradescope.com/courses/415456" rel="" target="">
 <span class="menu-text">Gradescope</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#milestone-1-create-public-github-repository-due-1021" id="toc-milestone-1-create-public-github-repository-due-1021" class="nav-link active" data-scroll-target="#milestone-1-create-public-github-repository-due-1021">Milestone 1: Create public GitHub repository (due 10/21)</a></li>
  <li><a href="#milestone-2-finding-data-and-writing-a-proposal-due-1028" id="toc-milestone-2-finding-data-and-writing-a-proposal-due-1028" class="nav-link" data-scroll-target="#milestone-2-finding-data-and-writing-a-proposal-due-1028">Milestone 2: Finding data and writing a proposal (due 10/28)</a>
  <ul class="collapse">
  <li><a href="#finding-a-data-source" id="toc-finding-a-data-source" class="nav-link" data-scroll-target="#finding-a-data-source">Finding a data source</a></li>
  <li><a href="#general-advice-for-choosing-data-sources" id="toc-general-advice-for-choosing-data-sources" class="nav-link" data-scroll-target="#general-advice-for-choosing-data-sources">General advice for choosing data sources</a></li>
  <li><a href="#writing-a-proposal" id="toc-writing-a-proposal" class="nav-link" data-scroll-target="#writing-a-proposal">Writing a proposal</a></li>
  </ul></li>
  <li><a href="#milestone-3-one-data-visualization-due-1111" id="toc-milestone-3-one-data-visualization-due-1111" class="nav-link" data-scroll-target="#milestone-3-one-data-visualization-due-1111">Milestone 3: One data visualization (due 11/11)</a></li>
  <li><a href="#milestone-4-add-results-from-one-analysis-due-1118" id="toc-milestone-4-add-results-from-one-analysis-due-1118" class="nav-link" data-scroll-target="#milestone-4-add-results-from-one-analysis-due-1118">Milestone 4: Add results from one analysis (due 11/18)</a></li>
  <li><a href="#final-step-write-up-final-report-due-1214" id="toc-final-step-write-up-final-report-due-1214" class="nav-link" data-scroll-target="#final-step-write-up-final-report-due-1214">Final step: Write up final report (due 12/14)</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Final Project Information</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 23, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>
<div class="old-course">
This content is from Fall 2022. Go to <a href="https://gov50-f23.github.io">Fall 2023 site</a>
</div>
<p>The final project is a data analysis project about whatever data excites you. That could be public opinion in U.S. elections, United Nations voting patterns, patterns of racial discrimination in police behavior, the distribution of salaries in basketball, or the economics of the Marvel Cinematic Universe. No matter the topic, you will formulate a key research question, find data on that question, answer the question using the tools of the course, and present those results for public consumption.</p>
<p>Here is a list of milestones that we will have to keep you on track:</p>
<ul>
<li>Milestone 1: Create a new public GitHub repository that will host the article (10/21)</li>
<li>Milestone 2: Find a data source and write a short proposal on your research question (10/28)</li>
<li>Milestone 3: Add one polished data visualization on your distill article (11/11)</li>
<li>Milestone 4: Add results from one set of analyses (11/18)</li>
<li>Final project due (12/14)</li>
</ul>
<section id="milestone-1-create-public-github-repository-due-1021" class="level2">
<h2 class="anchored" data-anchor-id="milestone-1-create-public-github-repository-due-1021">Milestone 1: Create public GitHub repository (due 10/21)</h2>
<p>Follow <a href="../assignments/distill.html">the instructions</a> on how to create a repository for your final project. You should change the metadata on your article and write a few sentences in the main text about what you might be interested in writing about. You will submit a link to the public article (not the github repository) to Canvas (not Gradescope).</p>
</section>
<section id="milestone-2-finding-data-and-writing-a-proposal-due-1028" class="level2">
<h2 class="anchored" data-anchor-id="milestone-2-finding-data-and-writing-a-proposal-due-1028">Milestone 2: Finding data and writing a proposal (due 10/28)</h2>
<section id="finding-a-data-source" class="level3">
<h3 class="anchored" data-anchor-id="finding-a-data-source">Finding a data source</h3>
<p>The biggest part of the final project in Gov 50 is finding a data source. Here are some other resources and repositories with data sets:</p>
<ul>
<li><a href="https://github.com/erikgahner/PolData">List of links to political science data sets</a></li>
<li><a href="https://dataverse.harvard.edu/dataverse/harvard?q=&amp;fq0=subject_ss%3A%22Social+Sciences%22&amp;types=dataverses%3Adatasets&amp;sort=dateSort&amp;order=desc">Harvard Dataverse - Social Science</a></li>
<li><a href="https://catalog.data.gov/dataset">Data.gov - Data sets released by the US government</a></li>
<li><a href="https://data.fivethirtyeight.com/">Data published by FiveThirtyEight</a></li>
<li><a href="https://github.com/HarvardOpenData/harvard-data">Harvard OpenData Group Directory</a></li>
<li><a href="https://psr.iq.harvard.edu/book/survey-data-collections">Harvard Program on Survey Research Data Collections</a></li>
<li><a href="https://psr.iq.harvard.edu/roper_center_public_opinion_research">Roper Center : Public Opinion in the US</a></li>
<li><a href="https://www.pewresearch.org/download-datasets/">Pew Research Center Data Sets</a></li>
</ul>
<p>If you find a data set that you think is interesting, but you have problems loading the data set into R, please contact the course staff. R can load almost anything, so we can likely help you.</p>
<p>We also have the following specific datasets available to use:</p>
<ul>
<li>American National Election Survey, 2016: <a href="https://www.dropbox.com/s/qf8mnhbpckx469u/anes-2016.csv?dl=0">Data</a> <a href="https://www.dropbox.com/s/n5ogow0vdcbmrik/anes_timeseries_2016_userguidecodebook.pdf?dl=0">Codebook</a></li>
<li>Civil Wars: <a href="https://www.dropbox.com/s/gde30hr9yokqku5/civilwar.csv?dl=0">Data</a> <a href="https://www.dropbox.com/s/m7hnd64g2z38plm/civilwar-codebook.txt?dl=0">Codebook</a></li>
<li>Political Violence: <a href="https://www.dropbox.com/s/8zms0isy8epvzvd/violence.csv?dl=0">Data</a> <a href="https://www.dropbox.com/s/wqmnc9w2stvhlvj/violence-codebook.txt?dl=0">Codebook</a></li>
<li>Fox News rollout: <a href="https://www.dropbox.com/s/i1n16wng61tq02x/foxnews.csv?dl=0">Data</a> <a href="https://www.dropbox.com/s/8a8lspgey9sx1pa/foxnews.pdf?dl=0">Codebook</a></li>
<li>Afrobarometer: <a href="https://www.dropbox.com/s/f4n778feixbvz4r/afrobarometer2016.RData?dl=0">Data</a> <a href="https://www.dropbox.com/s/4uhrdeylzc8r6ib/merged_round_6_codebook_20161.pdf?dl=0">Codebook</a></li>
</ul>
</section>
<section id="general-advice-for-choosing-data-sources" class="level3">
<h3 class="anchored" data-anchor-id="general-advice-for-choosing-data-sources">General advice for choosing data sources</h3>
<ul>
<li>If you want to analyze the relationship between X and Y, make sure that these two variables are included in the data set. If you want to look at effects for subgroups, make sure there is a variable that you can use for subsetting.</li>
<li>Try to look for a ‘codebook’ or some other document that explains what the variables mean and how they are coded.</li>
<li>For most projects, preparing the data for analysis takes longer than the actual analysis itself. Try to find a data set where you do not need to extensively recode / clean up the data before you run your analyses, this makes the final project easier.</li>
<li>In similar vein, if the data set is greater than about 50MB (this is not a hard cutoff), R commands and analyses tend to take longer.</li>
<li><strong>Important:</strong> Please do not try to commit any file that is larger than 100MB. You will not be able to push these files to GitHub and will require some complicated work to undo the commits. Instead, you can write an R script that subsets the data to units/variables that you need and save that file, which should be considerably smaller. Then you can put that in your repository and commit that.</li>
<li>Data from experiments is usually simple to analyze, since the analysis commonly involves simple comparisons of group means.</li>
</ul>
</section>
<section id="writing-a-proposal" class="level3">
<h3 class="anchored" data-anchor-id="writing-a-proposal">Writing a proposal</h3>
<p>You should write a one-paragraph note to describe what data set you will use and what your tentative research question is. Your research question should ask how one dependent variable is related to one or more independent variables. That is, your research question should be able to be answered by a regression analysis. In this paragraph, you should do the following:</p>
<ol type="1">
<li>State your research question.</li>
<li>Formulate a hypothesis related to the research question. This hypothesis should be rooted in some sort of theory. In other words, you need to present a plausible story why the hypothesis might be true. Often, this is in the form of a behaviorial or institutional explanation. As social scientists, we are not interested in idiosyncratic explanations; we want to understand systematic patterns and relationships!</li>
<li>Describe your explanatory variable(s) of interest and how it is measured. Importantly, we need to observe variation in this variable in order to study it!</li>
<li>Describe your outcome variable of interest and how it is measured.</li>
<li>What observed pattern in the data would provide support for your hypothesis? More importantly, what observed pattern would disprove your hypothesis?</li>
</ol>
<p>For instance, this would be a comprehensive paragraph that address each of these points in detail:</p>
<blockquote class="blockquote">
<p>Does unified government enhance legislative productivity? In this study, I plan to examine the extent to which periods of unified government produce more landmark laws. I hypothesize that legislative productivity increases during periods of unified government in which one party controls both Houses of Congress and the presidency relative to periods of divided government. During periods of unified government, I expect that it is more likely for major bills to pass both Houses and gain the president’s signature. During periods of divided government, it is more difficult to reach a consensus around legislation that can pass each House and gain the president’s approval. My sample is comprised of each of the 79th (1945-1946) through 103rd (1993-1994) Congresses. My unit of analysis is a Congress (e.g., the 88th Congress). The explanatory variable of interest is whether there is unified government (both Houses and the presidency are controlled by the same party) or divided government. The variable is coded =1 for unified government and =0 for divided government. My outcome variable is the count of landmark pieces of legislation passed in a given Congress. For instance, if the variable were coded =11, it would mean that 11 pieces of landmark legislation were signed into law in that Congress. This variable is measured from David Mayhew’s data set on landmark legislation and relies on Mayhew’s expert knowledge to classify legislation as “landmark.” If I observe greater landmark legislative productivity under unified government relative to divided government, this would provide support for my hypothesis. If, on the other hand, I observe less productivity or the same level of productivity under unified government, this would provide evidence against my hypothesis. When I run my regression of the count of landmark legislation on the unified government indicator variable, a positive, significant coefficient would indicate support for my hypothesis.</p>
</blockquote>
<p>Your paragraph might be less detailed and may not refer to any academic literature, but it should address the above items.</p>
<p>Note that you are not fully committing to any specific question or data in this exercise. If you want to change data or questions later, that is fine. This is just a milestone to keep you on track. You can write this proposal on your <code>index.Rmd</code> file in the public article. You will submit a link to the rendered article with the proposal on <strong>Friday, October 28th, 2022 at 11:59pm ET.</strong></p>
<p>Note that you will eventually remove this proposal with the actual article. If down the road you don’t want this proposal to be part of the public history of the repository, you can always create a new repository for the final report.</p>
</section>
</section>
<section id="milestone-3-one-data-visualization-due-1111" class="level2">
<h2 class="anchored" data-anchor-id="milestone-3-one-data-visualization-due-1111">Milestone 3: One data visualization (due 11/11)</h2>
<p>The next milestone will require that your Distill article loads the data you have selected and produces one interesting and polished data visualization. This could either show the distribution of one variable or the relationship between two variables.</p>
</section>
<section id="milestone-4-add-results-from-one-analysis-due-1118" class="level2">
<h2 class="anchored" data-anchor-id="milestone-4-add-results-from-one-analysis-due-1118">Milestone 4: Add results from one analysis (due 11/18)</h2>
<p>By this time, your article should contain one visualization and one analysis that attempts to answer your research question. There does not need to be a long discussion, but the results should be presented in either a second visualization or a nicely formatted table.</p>
</section>
<section id="final-step-write-up-final-report-due-1214" class="level2">
<h2 class="anchored" data-anchor-id="final-step-write-up-final-report-due-1214">Final step: Write up final report (due 12/14)</h2>
<p>The final report will include the following sections: (1) an introduction where you introduce the research question and hypothesis and briefly describe why it is interesting; (2) a data section that briefly describes the data source, describes how the key dependent and independent variables are measured (e.g., a survey, statistical model, or expert coding), and also produces a plot that summarizes the dependent variable; (3) a results section that contains a scatterplot, barplot, or boxplot of the main relationship of interest and output for the main regression of interest; and (4) a brief (one paragraph) concluding section that summarizes your results, assesses the extent to which you find support for your hypothesis, describes limitations of your analysis and threats to inference, and states how your analysis could be improved (e.g., improved data that would be useful to collect).</p>
<p>For the data section, you should note if your research design is cross-sectional (most projects will be of this type) or one of the other designs we discussed (randomized experiment, before-and-after, differences-in-differences). For the results section, you should interpret (in plain English) the main coefficient of interest in your regression. You should also comment on the statistical significance of the estimated coefficient and whether or not you believe the coefficient to represent a causal effect.</p>
<p><strong>This final report will be due on Wednesday, December 14th, 2022 at 11:59pm ET</strong></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>