{
  "hash": "b26509dec503ba71246b1ee4408c56fa",
  "result": {
    "markdown": "---\ntitle: \"Problem Set 2: Data Wrangling\"\ndue_date: 2022-09-14\n---\n\n\nYou can find instructions for obtaining and submitting problem sets [here](/assignments/problem-sets.qmd).\n\nYou can find the GitHub Classroom link to download the template repository on the [Ed Board](https://edstem.org/us/courses/24957/resources)\n\n\n## Background\n\nPolitical advertising has traditionally been focused on the medium of television, but in recent cycles, online advertising has become much more popular. In this problem set, you will explore a dataset that has information on Facebook ad spending by candidates in the 2018 election cycle in the United States. The variables in this data are described below. \n\n\n\n| Name               | Description                                                          |\n|:-------------------|:---------------------------------------------------------------------|\n| `cand_id`          | unique identifier code for candidate                                 |\n| `cand_name`        | full name of the candidate                                           |\n| `cand_name_last`   | last name of the candidate                                           |\n| `party`            | party affiliation of the candidate (R = Republican, D = Democrat)    |\n| `office`           | office being sought by candidate                                     |\n| `state`            | state in which the candidate is running                              |\n| `incumbency`       | incumbency status of candidate (incumbent, challenger, or open seat) |\n| `spend`            | estimated total spending on Facebook ads by candidate                |\n| `impressions`      | estimated total impressions of Facebook ads                          |\n| `ad_tone_attack`   | proportion of FB ads that mention candidate's opponent only          |\n| `ad_tone_promote`  | proportion of FB ads that mention candidate only                     |\n| `ad_tone_contrast` | proportion of FB ads that mention candidate and candidate's opponent |\n\n\n\n\n## Question 1 \n\nLoad the data using the `read_csv` function and save it as `fb_ads` (using this will automatically make `fb_ads` a tibble). In the text, describe how many candidates there are in the dataset. \n\nUse `dplyr` functions to create a table with the number of candidates in each type of office in the data set. Save this table output as `office_table` (for the autograder). Use the function `knitr::kable()` on this table to have a nicely formatted table produced in the knitted output. \n\n **Rubric**: \n\n## Question 2 \n\nCreate a tibble called `office_incumbent_attack` that has 4 rows that summarizes the average of `ad_tone_attack` for each combination of `office` and `incumbent`. Call the variable summarizing the attack variable as `attack_prop` and be sure to remove any missing values when computing the averages. \n\nUse `knitr::kable()` to produce a nicely formatted table. In this call, set the `digits` arguments to 3 and use the `col.names` argument to pass a nicer set of names. You can use the following as a template:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::kable(my_table, col.names = c(\"Variable 1\", \"Variable 2\", ...))\n```\n:::\n\n\nIn the writeup, describe which type of candidate sponsored the most attack ads on average. \n\n\n## Question 3\n\n\nCreate a new variable called `spend_millions` that is the amount of money the candidate spent on Facebook ads in millions of dollars (as opposed to dollars). Make sure to save the resulting dataset back as `fb_ads`.\n\nCreate a histogram of this variable for just the US Senate races. Save the ggplot output as `plot_q3` and also print it to produce a plot in the output. In the text, describe the shape of the histogram and tell the reader if most of the Senate candidates spent more or less than a million dollars on Facebook ads. \n\n\n## Question 4\n\nLet's now recreate the following plot that shows the top 20 Senate candidates in terms of Facebook ad spending. \n\n![](figures/senate-spenders.png){width=\"50%\"}\n\nYou should save the `ggplot` output as `fb_top_plot`. The key features of this graph that you should replicate for the autograder are:\n\n- The barplot should have candidate last names on the y-axis and the `spend_millions` variable from question 3 on the x-axis. \n- The data feeding into the `ggplot` call should only have US Senate candidates and only the candidates with the highest 20 `spend_millions` values. \n- The y-axis should be ordered in ascending values of `spend_millions` so that the lowest values are at the bottom. You may want to manipulate `cand_name_last` to achieve this. \n- The fill color of the bar plot should be mapped to the `party` variable (but not globally!). \n\nYou do not need to exactly match the labels, but you should have informative labels. The color does not need to match, but if you want to change the fill colors, you can use the `scale_fill_manual(value = c(R = \"red\", D = \"blue\"))` function (where you can change the red and blue to whatever you want). \n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}